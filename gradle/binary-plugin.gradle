
mainClassName = 'dredd.hooks/dredd.hooks.DreddHooksApplicationKt'

application {
    mainClassName = 'dredd.hooks.DreddHooksApplicationKt'
    applicationName = 'dredd-hooks-jvm'
//    applicationDefaultJvmArgs = ['-Dlogback.configurationFile=./logback.xml']
}

jar {
    manifest {
        attributes 'Implementation-Title': "DreddHooksApplication",
                'Main-Class': 'dredd.hooks.main'
    }
}

runtime {
    options = ["--strip-debug", "--compress", "2", "--no-header-files", "--no-man-pages"]
    modules = ['java.naming', 'java.xml']
}

tasks.runtime.doLast {
    copy {
        from('src/main/resources')
        into("$buildDir/image/bin")
    }
}

//mainClassName ='dredd.hooks.DreddHooksApplicationKt'
//task fatJar(type: OneJar) {
//    mainClass = 'dredd.hooks.DreddHooksApplicationKt'
//}
//
//artifacts {
//    archives fatJar
//}
//
//runtime {
//    options = ["--strip-debug", "--compress", "2", "--no-header-files", "--no-man-pages"]
//    modules = ['java.management', 'java.naming', 'java.instrument', 'jdk.unsupported', 'jdk.security.jgss', 'java.desktop']
//}
//
//tasks.runtime.doLast {
//    copy {
//        from("${projectDir}src/main/resources")
//        into("$buildDir/image/bin")
//    }
//}
//
//tasks.jar.enabled = true